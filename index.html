
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Watermelon&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="front-end github blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Watermelon's blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Watermelon's blog">
<meta property="og:description" content="front-end github blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Watermelon's blog">
<meta name="twitter:description" content="front-end github blog">
  
    <link rel="alternative" href="/atom.xml" title="Watermelon&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  <style>
    #musicBar{
      position: fixed;
      top: 200px;
      /*bottom: 0;*/
      right: 0;
      -webkit-transition: all 1.0s;
      -moz-transition: all 1.0s;
      -ms-transition: all 1.0s;
      -o-transition: all 1.0s;
      transition: all 1.0s;
      -webkit-transform: translate(298px, 0);
      -moz-transform: translate(298px, 0);
      -ms-transform: translate(298px, 0);
      -o-transform: translate(298px, 0);
      transform: translate(298px, 0);
      z-index: 99;
    }

    #musicBar:hover{
      -webkit-transform: translate(0, 0);
      -moz-transform: translate(0, 0);
      -ms-transform: translate(0, 0);
      -o-transform: translate(0, 0);
      transform: translate(0, 0);
    }
  </style>
</head>
<body>
<div id="musicBar">
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=397 height=430 src="http://music.163.com/outchain/player?type=0&id=436022426&auto=1&height=430"></iframe>
</div>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Watermelon&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">have fun!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">about</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="yoursite.com">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-基于iscroll模拟原生应用中的下拉刷新和下拉加载更多" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/22/基于iscroll模拟原生应用中的下拉刷新和下拉加载更多/" class="article-date">
  <time datetime="2016-07-22T02:07:19.000Z" itemprop="datePublished">2016-07-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/22/基于iscroll模拟原生应用中的下拉刷新和下拉加载更多/">模拟原生应用中的下拉刷新和下拉加载更多</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<ul>
<li>想要自己写这个功能的话，关键在于，要狠狠的研究手机中的各种app的这个功能，研究各种用户可能的手势和习惯</li>
<li>原生APP应用中，经常可以见到下拉刷新和触底加载，在html5页面中，可以通过原生js事件touchstart，touchmove和touchend实现</li>
<li>实现的方式有两种：<br>(1)使用iscroll.js实现<br>(2)利用浏览器原生的弹性滚动<br>(3)禁用浏览器原生的弹性滚动</li>
<li>iscroll这个插件不算轻量级，而且这个插件里面禁用了很多浏览器的默认行为，包括a标签的默认行为，还有原生的click方法都会被禁用掉，如果强行恢复，有一定的弊端。所以建议自己写一个轻量级的插件</li>
<li>如果自己写这个功能的话，一般推荐第二种，利用浏览器的原生滚动事件。</li>
</ul>
<hr>
<h2 id="一、利用浏览器原生的弹性滚动"><a href="#一、利用浏览器原生的弹性滚动" class="headerlink" title="一、利用浏览器原生的弹性滚动"></a>一、利用浏览器原生的弹性滚动</h2><ul>
<li>推荐使用这种方法的原因其实很简单，可以节省很多代码，并且各种浏览器都兼容，也没有性能上的开销</li>
<li><p>html如下，与平常的页面没什么区别</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"scroller"</span> style=<span class="string">"transform: translate(0px,0px) translateZ(0);"</span>&gt;</span><br><span class="line">	&lt;div id=<span class="string">"pullDown"</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">"pull-down-container"</span>&gt;</span><br><span class="line">            &lt;i class=<span class="string">"pull-down-icon"</span>&gt;&lt;/i&gt;</span><br><span class="line">            &lt;div class=<span class="string">"pull-down-msg"</span>&gt;下拉刷新&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">	&lt;ul&gt;</span><br><span class="line">		&lt;li&gt;下拉下拉下拉下拉1&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;下拉下拉下拉下拉2&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;下拉下拉下拉下拉3&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;下拉下拉下拉下拉4&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;下拉下拉下拉下拉5&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;下拉下拉下拉下拉6&lt;/li&gt;</span><br><span class="line">	&lt;/ul&gt;</span><br><span class="line">	&lt;div id=<span class="string">"pullUp"</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">"pull-up-container"</span>&gt;</span><br><span class="line">            &lt;i class=<span class="string">"pull-up-icon"</span>&gt;&lt;/i&gt;</span><br><span class="line">            &lt;div class=<span class="string">"pull-up-msg"</span>&gt;上拉加载更多&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在touchmove被触发之后，如果判断已经到达页面顶部，这时候还是要短暂禁用浏览器的默认行为，否则，在手机端调试时浏览器的页面滑到顶部的时候会因为浏览器的默认滚动行为向下继续弹性滑动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">var winHeight = window.innerHeight,</span><br><span class="line">	content = document.getElementById(<span class="string">'scroller'</span>);</span><br><span class="line">content.addEventListener(<span class="string">"touchstart"</span>, <span class="keyword">function</span>(event) &#123;</span><br><span class="line"></span><br><span class="line">	_this.pullDown.className = <span class="string">''</span>;</span><br><span class="line">	var touch = event.targetTouches[0];</span><br><span class="line">	start = touch.pageY;</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">content.addEventListener(<span class="string">"touchmove"</span>, <span class="keyword">function</span>(event) &#123;</span><br><span class="line">	</span><br><span class="line">	var touch = event.targetTouches[0];</span><br><span class="line">	end = touch.pageY - start;</span><br><span class="line">	var scrolltop = document.body.scrollTop || document.documentElement.scrollTop;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (end &gt; 0 &amp;&amp; scrolltop == 0) &#123;</span><br><span class="line">		// 如果滑到顶部，禁用默认的滚动行为</span><br><span class="line">		event.preventDefault();</span><br><span class="line">		// 向下滑-刷新的情况</span><br><span class="line">		// ...</span><br><span class="line">		</span><br><span class="line">		// distance是个刷新的滑动极限距离，超过这个距离，若松开手就会刷新</span><br><span class="line">		<span class="keyword">if</span> (end &gt; distance) &#123;</span><br><span class="line">			// 这些都是一些样式的问题</span><br><span class="line">			_this.pullDownIcon.className = <span class="string">'pull-down-icon reverse-down'</span>;</span><br><span class="line">			_this.pullDownMsg.innerText = <span class="string">'松开刷新'</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			_this.pullDownIcon.className = <span class="string">'pull-down-icon'</span>;</span><br><span class="line">			_this.pullDownMsg.innerText = <span class="string">'下拉刷新'</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(end &lt; 0 &amp;&amp; (winHeight + scrolltop == document.body.clientHeight))&#123;</span><br><span class="line">		</span><br><span class="line">		// 向上滑-加载更多的情况</span><br><span class="line">		// 判断是否触底，然后加载更多</span><br><span class="line">		// 屏幕高度 window.innerHeight  </span><br><span class="line">		// 滚动高度  scrollTop</span><br><span class="line">		// 文档整体高度 document.body.clientHeight</span><br><span class="line">		event.preventDefault();</span><br><span class="line">		// .......</span><br><span class="line">		//本来到这里已经非常完美，但是在这一步，event.preventDefault()无法阻止浏览器的滚动行为，浏览器出现警告</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>((-end) &gt; distance) &#123;</span><br><span class="line">			_this.pullUpIcon.className = <span class="string">'pull-up-icon reverse-up'</span>;</span><br><span class="line">			_this.pullUpMsg.innerText = <span class="string">'松开加载更多'</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			_this.pullUpIcon.className = <span class="string">'pull-up-icon'</span>;</span><br><span class="line">			_this.pullUpMsg.innerText = <span class="string">'下拉加载更多'</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">content.addEventListener(<span class="string">"touchend"</span>, <span class="keyword">function</span>(event) &#123;</span><br><span class="line">	</span><br><span class="line">	// 如果 end&gt;0,那么一定是到了顶部了</span><br><span class="line">	<span class="keyword">if</span> (end &gt; 0) &#123;</span><br><span class="line">		<span class="keyword">if</span> (end &gt; distance) &#123;</span><br><span class="line">			// 常见的是局部刷新</span><br><span class="line">			//松开的时候大于规定的局限距离就刷新</span><br><span class="line">			window.location.reload();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			// 否则恢复最初的状态</span><br><span class="line">			_this.pullDown.style.marginTop = <span class="string">'-'</span> + _this.distance + <span class="string">'px'</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(end &lt; 0 &amp;&amp; (winHeight + document.body.scrollTop + (-end * _this.scale) &gt;= document.body.clientHeight)) &#123;</span><br><span class="line">		// 这个情况就是触碰到底部的情况</span><br><span class="line">		<span class="keyword">if</span>((-end) &gt; distance) &#123;</span><br><span class="line">			// 松开的时候大于规定的局限距离就异步加载更多数据</span><br><span class="line">			_this.loadMore();</span><br><span class="line">			_this.pullUp.style.marginBottom = <span class="string">'-'</span> + distance + <span class="string">'px'</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			//否则恢复原状</span><br><span class="line">			_this.pullUp.style.marginBottom = <span class="string">'-'</span> + distance + <span class="string">'px'</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>大致的框架就如同上面，本文的最下方有完整代码的链接</p>
</li>
<li>上面的代码其实执行效果并不是很完美，问题在于，到达页面底部的时候，是无法阻止浏览器的默认的滚动行为的，因此在上拉刷新的时候回出现问题。但其实这并不是一个致命的问题。因为，现在的产品很少要用到下拉到底部的时候手动刷新的情况。多观察一下一些常用的app就会知道，其实下拉到底部的时候是会自动加载数据的，像微博微信什么的。所以，下拉到触底的时候，并不需要阻止浏览器的默认滚动行为，只需显示一个加载图标，同时请求加载数据即可</li>
</ul>
<hr>
<h2 id="二、阻止浏览器的默认行为"><a href="#二、阻止浏览器的默认行为" class="headerlink" title="二、阻止浏览器的默认行为"></a>二、阻止浏览器的默认行为</h2><ul>
<li><p>html如下，wrapper与浏览器同宽同高，溢出隐藏，由scroller在页面中用translate控制滚动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"wrapper"</span>&gt;</span><br><span class="line">	&lt;div id=<span class="string">"scroller"</span> style=<span class="string">"transform: translate(0px,0px) translateZ(0);"</span>&gt;</span><br><span class="line">		&lt;div id=<span class="string">"pullDown"</span>&gt;</span><br><span class="line">	        &lt;div class=<span class="string">"pull-down-container"</span>&gt;</span><br><span class="line">	            &lt;i class=<span class="string">"pull-down-icon"</span>&gt;&lt;/i&gt;</span><br><span class="line">	            &lt;div class=<span class="string">"pull-down-msg"</span>&gt;下拉刷新&lt;/div&gt;</span><br><span class="line">	        &lt;/div&gt;</span><br><span class="line">	    &lt;/div&gt;</span><br><span class="line">		&lt;ul&gt;</span><br><span class="line">			&lt;li&gt;下拉下拉下拉下拉1&lt;/li&gt;</span><br><span class="line">			&lt;li&gt;下拉下拉下拉下拉2&lt;/li&gt;</span><br><span class="line">			&lt;li&gt;下拉下拉下拉下拉3&lt;/li&gt;</span><br><span class="line">			&lt;li&gt;下拉下拉下拉下拉4&lt;/li&gt;</span><br><span class="line">			&lt;li&gt;下拉下拉下拉下拉5&lt;/li&gt;</span><br><span class="line">			&lt;li&gt;下拉下拉下拉下拉6&lt;/li&gt;</span><br><span class="line">		&lt;/ul&gt;</span><br><span class="line">		&lt;div id=<span class="string">"pullUp"</span>&gt;</span><br><span class="line">	        &lt;div class=<span class="string">"pull-up-container"</span>&gt;</span><br><span class="line">	            &lt;i class=<span class="string">"pull-up-icon"</span>&gt;&lt;/i&gt;</span><br><span class="line">	            &lt;div class=<span class="string">"pull-up-msg"</span>&gt;上拉加载更多&lt;/div&gt;</span><br><span class="line">	        &lt;/div&gt;</span><br><span class="line">	    &lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>其实分别有没有阻止浏览器的默认滚动行为，只需要看看有没有滚动条的存在，如果有滚动条，就一定没有阻止浏览器的默认行为</p>
</li>
<li><p>由于阻止了浏览器的默认行为，页面的滚动将由我们手动控制，即touchmove了多少距离，scroller就滚动多少距离。建议用css3中的transform中的translate来控制，而不要用margin-top和top，原因如下：<br>(1)margin-top和top都是布局样式，会引起页面的重绘和重排，而translate只是个绘制样式，不会引起浏览器的重绘和重排<br>(2)translate3d 可以触发手机的GPU加速组件</p>
</li>
<li><p>如果选择阻止默认滚动行为，所需的js代码就会复杂很多。因为要考虑到用户的各种可能的手势和使用习惯，而这些手势和使用习惯都是在原生的滚动行为中不需要我们考虑的</p>
</li>
<li>最下方有完整非最终版的代码</li>
</ul>
<hr>
<h2 id="三、使用iscroll-js"><a href="#三、使用iscroll-js" class="headerlink" title="三、使用iscroll.js"></a>三、使用iscroll.js</h2><ul>
<li>使用iscroll的话，有个缺点就是，默认的点击事件和a标签的默认行为都会被阻止掉，并且没有滚动条，而且iscroll并不属于轻量级的组件</li>
<li>下面是使用iscroll的代码，它帮助我们实现了用translate控制页面滚动的所有过程，但是对于具体的行为，比如下拉刷新和上拉加载，还是要自己用一些js代码来定义的</li>
<li><p>html代码如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"js/iscroll.js?v=201607250942"</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"wrapper"</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">"scroller"</span>&gt;</span><br><span class="line">        &lt;div id=<span class="string">"pullDown"</span>&gt;</span><br><span class="line">            &lt;div class=<span class="string">"pull-down-container"</span>&gt;</span><br><span class="line">                &lt;i class=<span class="string">"pull-down-icon"</span>&gt;&lt;/i&gt;</span><br><span class="line">                &lt;div class=<span class="string">"pull-down-msg"</span>&gt;下拉刷新&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            </span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;div id=<span class="string">"pullUp"</span>&gt;</span><br><span class="line">            &lt;div class=<span class="string">"pull-up-container"</span>&gt;</span><br><span class="line">                &lt;i class=<span class="string">"pull-up-icon"</span>&gt;&lt;/i&gt;</span><br><span class="line">                &lt;div class=<span class="string">"pull-up-msg"</span>&gt;上拉加载更多&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>js代码如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">// 滚动配置</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">iscrollConfig</span></span>() &#123;</span><br><span class="line">    myScroll = new IScroll(<span class="string">'#wrapper'</span>, &#123;</span><br><span class="line">        probeType: 3,</span><br><span class="line">        mouseWheel: <span class="literal">true</span>,</span><br><span class="line">        click: <span class="literal">true</span>, //默认是所有的click事件都返回<span class="literal">false</span>(click,a标签都没反应),加这个就好了</span><br><span class="line">        //tap: <span class="literal">true</span>,</span><br><span class="line">        //preventDefaultException: &#123; tagName: /^(UL)$/ &#125;</span><br><span class="line">        // <span class="built_in">disable</span>Mouse: <span class="literal">true</span>,</span><br><span class="line">        // <span class="built_in">disable</span>Pointer: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // 自定义下拉和上拉</span><br><span class="line">    myScroll.on(<span class="string">"scroll"</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        var y = this.y,</span><br><span class="line">            maxY = this.maxScrollY - y,</span><br><span class="line">            downHasClass = downIcon.hasClass(<span class="string">"reverse-down"</span>),</span><br><span class="line">            upHasClass = upIcon.hasClass(<span class="string">"reverse-up"</span>);</span><br><span class="line">        <span class="keyword">if</span> (y &gt;= distance) &#123;</span><br><span class="line">            !downHasClass &amp;&amp; downIcon.addClass(<span class="string">"reverse-down"</span>);</span><br><span class="line">            $(<span class="string">'.pull-down-msg'</span>).html(<span class="string">'松开刷新'</span>);</span><br><span class="line">            <span class="built_in">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y &lt; distance &amp;&amp; y &gt; 0) &#123;</span><br><span class="line">            downHasClass &amp;&amp; downIcon.removeClass(<span class="string">"reverse-down"</span>);</span><br><span class="line">            $(<span class="string">'.pull-down-msg'</span>).html(<span class="string">'下拉刷新'</span>);</span><br><span class="line">            <span class="built_in">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (maxY &gt;= distance) &#123;</span><br><span class="line">            !upHasClass &amp;&amp; upIcon.addClass(<span class="string">"reverse-up"</span>);</span><br><span class="line">            $(<span class="string">'.pull-up-msg'</span>).html(<span class="string">'松开加载更多'</span>);</span><br><span class="line">            <span class="built_in">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (maxY &lt; distance &amp;&amp; maxY &gt;= 0) &#123;</span><br><span class="line">            upHasClass &amp;&amp; upIcon.removeClass(<span class="string">"reverse-up"</span>);</span><br><span class="line">            $(<span class="string">'.pull-up-msg'</span>).html(<span class="string">'上拉加载更多'</span>);</span><br><span class="line">            <span class="built_in">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // 下拉刷新事件</span><br><span class="line">    myScroll.on(<span class="string">"slideDown"</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (this.y &gt; distance) &#123;</span><br><span class="line">            upIcon.removeClass(<span class="string">"reverse-down"</span>);</span><br><span class="line">            window.location.reload();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    // 上拉加载更多</span><br><span class="line">    myScroll.on(<span class="string">"slideUp"</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (this.maxScrollY - this.y &gt; distance) &#123;</span><br><span class="line">            loadMore();</span><br><span class="line">            upIcon.removeClass(<span class="string">"reverse-up"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="四、还需解决的问题"><a href="#四、还需解决的问题" class="headerlink" title="四、还需解决的问题"></a>四、还需解决的问题</h2><ul>
<li>在上面的第二种方法中，即禁止浏览器的原生滚动时，我用translate控制整个页面的滚动，当页面整天滚动并且手并没有接触屏幕时，这时候如果收突然间接触屏幕，按理来说，滚动应该停止在当前位置，但是我目前不知道怎么获取当前的滚动距离。因为使用的是translate，所以无法通过简单的offsetTop来获取，求解。。。</li>
<li>使用iscroll.js时，如果我强行恢复click事件，页面中的a标签和click事件确实恢复了，可是我发现一个弊端，就是在浏览页面的时候，滚动的过程中突然手触屏幕并且不动，这时候页面停下来，然后手松开不再接触屏幕的时候，本应该什么事都没发生，但是由于我强行恢复了click，这时候就会触发当前元素的click事件，如果是a标签就会跳到指定的页面</li>
</ul>
<hr>
<p><a href="https://github.com/shinyshine/slideUp-slideDown" target="_blank" rel="external">点击查看完整代码</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/07/22/基于iscroll模拟原生应用中的下拉刷新和下拉加载更多/" data-id="cireqlzrl000fpwcj39sppwwk" class="article-share-link" data-share="baidu" data-title="模拟原生应用中的下拉刷新和下拉加载更多">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-微信分享链接自定义标题，图标和摘要" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/20/微信分享链接自定义标题，图标和摘要/" class="article-date">
  <time datetime="2016-07-20T09:46:39.000Z" itemprop="datePublished">2016-07-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/微信/">微信</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/20/微信分享链接自定义标题，图标和摘要/">微信分享链接自定义标题，图标和摘要</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<ul>
<li>微信扫描二维码分享网页链接的时候，一般包含标题和链接的网址</li>
<li>标题就是网页html页面的title内容，链接的网址就是当前页面的url</li>
</ul>
<h2 id="一、自定义分享图标"><a href="#一、自定义分享图标" class="headerlink" title="一、自定义分享图标"></a>一、自定义分享图标</h2><ul>
<li>自定义分享图标比较简单，可以在不调用微信开发接口的前提下实现</li>
<li>原理：微信会自动截取页面的第一张图片作为分享出去的图标</li>
<li>图片需满足条件：图片大小必须大于300*300; 图片的display不能为none</li>
<li>如果不想让图片显示，但又想用起作为分享图标，可以使用一下代码<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 将一下代码加载body标签的最前面 --&gt;</span><br><span class="line">&lt;div style=<span class="string">"width: 0; height: 0; overflow: hidden;"</span>&gt;</span><br><span class="line">	&lt;img src=<span class="string">"share-icon.jpg"</span> alt=<span class="string">"shareicon"</span> title=<span class="string">"shareicon"</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="二、自定义摘要"><a href="#二、自定义摘要" class="headerlink" title="二、自定义摘要"></a>二、自定义摘要</h2><ul>
<li>如果想在显示页面url的地方显示摘要，就要用到微信开发的js接口了</li>
<li>大致的步骤如下：</li>
<li>1）登录微信公众平台，填写js接口安全域名(就是给微信明确是哪个网站要调用微信的接口)</li>
<li>2）在被分享的页面中，引入js文件 <a href="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" target="_blank" rel="external">http://res.wx.qq.com/open/js/jweixin-1.0.0.js</a></li>
<li>3）接下来开始配置，配置过程中最麻烦的就是签名(signature)的获取，需要用到access_token和签名算法生成。access_token的存活时间只有7200s，并且不能被频繁的获取。因此，在获取完access_token之后要在服务器端对其进行全局存储，等到过时才再次获取。配置的参数基本上由服务器端给出。也就是说，这一步由后台来做。</li>
<li>4）配置完成之后，调用ready函数进行分享时间的绑定<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">//微信分享图标 摘要自定义</span><br><span class="line">//config的参数，除了jsApiList和link，其他都从后台获取</span><br><span class="line">wx.config(&#123;</span><br><span class="line">    debug: <span class="literal">false</span>, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过<span class="built_in">log</span>打出，仅在pc端时才会打印。</span><br><span class="line">    appId: <span class="string">'6666666666'</span>,                    // 必填，公众号的唯一标识(在自己的公众号查看appid)</span><br><span class="line">    timestamp: <span class="string">'&lt;?= $this-&gt;wx_ts?&gt;'</span>,        // 必填，生成签名的时间戳</span><br><span class="line">    nonceStr: <span class="string">'&lt;?= $this-&gt;wx_noncestr?&gt;'</span>,   // 必填，生成签名的随机串</span><br><span class="line">    signature: <span class="string">'&lt;?= $this-&gt;wx_signature?&gt;'</span>, // 必填，签名的详细生成方式可从下面的链接获得</span><br><span class="line">    jsApiList: [<span class="string">'onMenuShareTimeline'</span>, <span class="string">'onMenuShareAppMessage'</span>] // 必填，需要使用的JS接口列表</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 上面的配置成功之后 执行ready函数</span><br><span class="line">wx.ready(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    // 分享到朋友圈</span><br><span class="line">    wx.onMenuShareTimeline(&#123;</span><br><span class="line">        title: <span class="string">'啦啦啦啦啦'</span>,    				// 分享标题</span><br><span class="line">        link: window.location.href,             // 分享链接</span><br><span class="line">        imgUrl: <span class="string">'../img/anny.jpg'</span>,              // 分享图标</span><br><span class="line">        success: <span class="function"><span class="title">function</span></span> () &#123; </span><br><span class="line">            // 用户确认分享后执行的回调函数</span><br><span class="line">        &#125;,</span><br><span class="line">        cancel: <span class="function"><span class="title">function</span></span> () &#123; </span><br><span class="line">            // 用户取消分享后执行的回调函数</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // 分享给朋友</span><br><span class="line">    wx.onMenuShareAppMessage(&#123;</span><br><span class="line">        title: <span class="string">'啦啦啦啦啦啦啦'</span>,  // 分享标题</span><br><span class="line">        desc: <span class="string">'知识的海洋'</span>,                                      // 分享描述</span><br><span class="line">        link: window.location.href,                              // 分享链接, 这里便是自定义摘要了，可以替代原本的url的位置</span><br><span class="line">        imgUrl: <span class="string">'../img/anny.jpg'</span>,          // 分享图标</span><br><span class="line">        <span class="built_in">type</span>: <span class="string">''</span>,                                                // 分享类型,music、video或link，不填默认为link</span><br><span class="line">        dataUrl: <span class="string">''</span>,                                             // 如果<span class="built_in">type</span>是music或video，则要提供数据链接，默认为空</span><br><span class="line">        success: <span class="function"><span class="title">function</span></span> () &#123; </span><br><span class="line">            // 用户确认分享后执行的回调函数</span><br><span class="line">        &#125;,</span><br><span class="line">        cancel: <span class="function"><span class="title">function</span></span> () &#123; </span><br><span class="line">            // 用户取消分享后执行的回调函数</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">wx.error(<span class="keyword">function</span>(res)&#123;</span><br><span class="line">    // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="三、需注意的问题"><a href="#三、需注意的问题" class="headerlink" title="三、需注意的问题"></a>三、需注意的问题</h2><ul>
<li>1）如果你分享的页面的url包含端口号，最好把它去掉，有端口号的话不能配置成功</li>
<li>2）access_token和jsapi_ticket一定要在服务器端实现全局存储和过期重新获取，不能频繁获取access_token和jsapi_ticket</li>
</ul>
<hr>
<p>更多关于JS-SDK的说明，详见<br><a href="https://mp.weixin.qq.com/wiki?action=doc&amp;id=mp1421141115&amp;t=0.1299369510323798&amp;token=&amp;lang=zh_CN#buzhou1" target="_blank" rel="external">微信网页开发之JS-SDK</a><br>里面有很多很好玩很实用的方法，详细用法也都有说明。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/07/20/微信分享链接自定义标题，图标和摘要/" data-id="cireqlzvq001hpwcjf1bsukkr" class="article-share-link" data-share="baidu" data-title="微信分享链接自定义标题，图标和摘要">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/微信/">微信</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-html页面反运营商劫持" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/19/html页面反运营商劫持/" class="article-date">
  <time datetime="2016-07-19T07:41:26.000Z" itemprop="datePublished">2016-07-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/安全/">安全</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/19/html页面反运营商劫持/">html页面反运营商劫持</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>网页中的html页面或者是app中的webview，有时候会被运营商或其他网站劫持</li>
<li>为了防止自己的网页被别人别用框架引用过去，有个简单的解决方法</li>
</ul>
<h2 id="将下面代码写入head标签"><a href="#将下面代码写入head标签" class="headerlink" title="将下面代码写入head标签"></a>将下面代码写入head标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;style <span class="built_in">type</span>=<span class="string">"text/css"</span>&gt;</span><br><span class="line">    html &#123;</span><br><span class="line">        display:none;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">if</span>( self == top ) &#123;</span><br><span class="line">        document.documentElement.style.display = <span class="string">'block'</span> ;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        top.location = self.location;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h2><ul>
<li>在没有确认自己的页面没有被别人引用之前，要先隐藏当前的html</li>
<li>解析window.self 和 window.top<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(window.self == window.top) &#123;</span><br><span class="line">	//当前窗口就是最顶级窗口，说明本页面的上级也没有别的窗口（没有iframe）</span><br><span class="line">	//这时候就显示自己的页面</span><br><span class="line">	document.documentElement.style.display = <span class="string">'block'</span> ;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	//如果当前的窗口不是最顶级的窗口，则说明你的html页面被别人用iframe框架劫持了</span><br><span class="line">	//这时候要跳转到自己本来的页面(反正就是不能让自己的页面在别人的网站显示)</span><br><span class="line">	top.location = self.location;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/07/19/html页面反运营商劫持/" data-id="cireqlzq00005pwcjnenh2mt3" class="article-share-link" data-share="baidu" data-title="html页面反运营商劫持">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/安全/">安全</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-angular中控制器之间的通信" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/12/angular中控制器之间的通信/" class="article-date">
  <time datetime="2016-07-12T07:51:25.000Z" itemprop="datePublished">2016-07-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/AngularJS/">AngularJS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/12/angular中控制器之间的通信/">angular中控制器之间的通信</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="一、向上传播事件-emit"><a href="#一、向上传播事件-emit" class="headerlink" title="一、向上传播事件$emit"></a>一、向上传播事件$emit</h2><ul>
<li>$on 用于加收event和data</li>
<li>$emit 作用是向父级控制器传递event和data，在子控制器中触发</li>
<li>在下面的代码中，对子控制器中的son进行监听，son发生变化是出发emit向上传播son的值,是的parent的值发生改变<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;div ng-controller=<span class="string">"parentCon"</span>&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123;parent&#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;div ng-controller=<span class="string">"sonCon"</span>&gt;</span><br><span class="line">		&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> ng-model=<span class="string">"son"</span> /&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	angular.module(<span class="string">'homeApp'</span>, [])</span><br><span class="line"></span><br><span class="line">	.controller(<span class="string">'parentCon'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>) &#123;</span><br><span class="line">		<span class="variable">$scope</span>.<span class="variable">$on</span>(<span class="string">'changeParent'</span>, <span class="keyword">function</span>(event, data) &#123;</span><br><span class="line">			// event 是一个包含许多方法的对象</span><br><span class="line">			// data是子控制器传递过来的新值</span><br><span class="line">			<span class="variable">$scope</span>.parent = data;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	.controller(<span class="string">'sonCon'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>) &#123;</span><br><span class="line">		<span class="variable">$scope</span>.son = <span class="string">'son'</span>;</span><br><span class="line">		<span class="variable">$scope</span>.<span class="variable">$watch</span>(<span class="variable">$scope</span>.son, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">			<span class="variable">$scope</span>.<span class="variable">$emit</span>(<span class="string">'changeParent'</span>, <span class="variable">$scope</span>.son);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="二、向下传播事件-broadcast"><a href="#二、向下传播事件-broadcast" class="headerlink" title="二、向下传播事件$broadcast"></a>二、向下传播事件$broadcast</h2><ul>
<li>$broadcast 作用是向子级控制器传递event和data，在父控制器中触发</li>
<li>监听父控制器中的parent，发生变化触发broadcast，向子控制器传递新值<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div ng-controller=<span class="string">"parentCon"</span>&gt;</span><br><span class="line">	&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> ng-model=<span class="string">"parent"</span> /&gt;</span><br><span class="line">	&lt;div ng-controller=<span class="string">"sonCon"</span>&gt;</span><br><span class="line">		&lt;p&gt;&#123;&#123;son&#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	angular.module(<span class="string">'homeApp'</span>, [])</span><br><span class="line"></span><br><span class="line">	.controller(<span class="string">'parentCon'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>) &#123;</span><br><span class="line">		<span class="variable">$scope</span>.parent = <span class="string">'parent'</span>;</span><br><span class="line">		<span class="variable">$scope</span>.<span class="variable">$watch</span>(<span class="variable">$scope</span>.parent, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">			<span class="variable">$scope</span>.<span class="variable">$broadcast</span>(<span class="string">'changeSon'</span>, <span class="variable">$scope</span>.parent);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	.controller(<span class="string">'sonCon'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>) &#123;</span><br><span class="line">		<span class="variable">$scope</span>.<span class="variable">$on</span>(<span class="string">'changeSon'</span>, <span class="keyword">function</span>(event, data) &#123;</span><br><span class="line">			<span class="variable">$scope</span>.son = data;</span><br><span class="line">		&#125;)		</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/07/12/angular中控制器之间的通信/" data-id="cireqlzo90000pwcjx0kbbbib" class="article-share-link" data-share="baidu" data-title="angular中控制器之间的通信">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular/">angular</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-angular表单验证" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/11/angular表单验证/" class="article-date">
  <time datetime="2016-07-11T08:48:30.000Z" itemprop="datePublished">2016-07-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/AngularJS/">AngularJS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/11/angular表单验证/">angular表单验证</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="一、angular中form表单的基本结构"><a href="#一、angular中form表单的基本结构" class="headerlink" title="一、angular中form表单的基本结构"></a>一、angular中form表单的基本结构</h2><ul>
<li>form标签一定要有name值，不需要action，method等属性</li>
<li>button的type必须是submit（可直接实现回车登录）<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form name=<span class="string">"loginForm"</span>&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">		&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> class=<span class="string">"form-control"</span> /&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="二、开始使用angular内置指令"><a href="#二、开始使用angular内置指令" class="headerlink" title="二、开始使用angular内置指令"></a>二、开始使用angular内置指令</h2><ul>
<li><p>ng-model<br>用于双向绑定表单的值，要注意，如果某一项没有通过验证，则该项的值不会绑定到model中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 下面的测试可以简单的验证没有通过验证的表单项是不会被绑定到作用域的</span><br><span class="line">// 当然需要自己写个controller, 下面会有完整的代码</span><br><span class="line">&lt;p&gt;&#123;&#123;userdata.username&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;form name=<span class="string">"loginForm"</span> ng-submit=<span class="string">"submitLoginForm(loginForm.<span class="variable">$valid</span>)"</span>&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">		&lt;input ng-model=<span class="string">"userdata.username"</span> <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> class=<span class="string">"form-control"</span> /&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ng-submit和$valid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 点击登录按钮或者是回车的时候，出发对应控制器的submitLoginForm方法</span><br><span class="line">// 传入的参数表示当前表单是否验证成功</span><br><span class="line">&lt;form name=<span class="string">"loginForm"</span> ng-submit=<span class="string">"submitLoginForm(loginForm.<span class="variable">$valid</span>)"</span>&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">		&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> class=<span class="string">"form-control"</span> /&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ng-minlength和ng-maxlength</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ng-minlength和ng-maxlength限制当前文本框的最大和最小长度</span><br><span class="line">// 任何一个不满足都将使得 loginForm.<span class="variable">$valid</span>的值为0</span><br><span class="line">&lt;form name=<span class="string">"loginForm"</span> ng-submit=<span class="string">"submitLoginForm(loginForm.<span class="variable">$valid</span>)"</span>&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">		&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> class=<span class="string">"form-control"</span> ng-minlength=<span class="string">"4"</span> ng-maxlength=<span class="string">"10"</span>/&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ng-if, required和$error,$touched</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 如果不满足min-length好人max-length的限制并且用户已经碰过那个输入框了</span><br><span class="line">// 就会显示p标签里面的内容</span><br><span class="line">// 可以自己试试看&lt;pre&gt;&#123;&#123;loginForm.username&#125;&#125;&lt;/pre&gt; 看看里面包含哪些信息</span><br><span class="line">&lt;form name=<span class="string">"loginForm"</span> ng-submit=<span class="string">"submitLoginForm(loginForm.<span class="variable">$valid</span>)"</span>&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">		&lt;input ng-model=<span class="string">"userdata.username"</span> <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> class=<span class="string">"form-control"</span> ng-minlength=<span class="string">"4"</span> ng-maxlength=<span class="string">"10"</span> required/&gt;</span><br><span class="line">		&lt;p class=<span class="string">"error-red"</span> ng-if=<span class="string">"(loginForm.username.<span class="variable">$error</span>.minlength || loginForm.username.<span class="variable">$error</span>.maxlength) &amp;&amp; loginForm.username.<span class="variable">$touched</span>"</span>&gt;用户名必须在4和10之间</span><br><span class="line">		&lt;/p&gt;</span><br><span class="line">		&lt;p class=<span class="string">"error-red"</span> ng-if=<span class="string">"loginForm.username.<span class="variable">$error</span>.required &amp;&amp; loginForm.username.<span class="variable">$touched</span>"</span>&gt;用户名不能为空&lt;/p&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ng-disabled和$invalid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 如果表单没有通过验证，按钮显示不可提交的状态(加上disabled属性，可以根据该属性自定义样式)</span><br><span class="line">&lt;form name=<span class="string">"loginForm"</span> ng-submit=<span class="string">"submitLoginForm(loginForm.<span class="variable">$valid</span>)"</span>&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">		&lt;input ng-model=<span class="string">"userdata.username"</span> <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> class=<span class="string">"form-control"</span> ng-minlength=<span class="string">"4"</span> ng-maxlength=<span class="string">"10"</span> required/&gt;</span><br><span class="line">		&lt;p class=<span class="string">"error-red"</span> ng-if=<span class="string">"(loginForm.username.<span class="variable">$error</span>.minlength || loginForm.username.<span class="variable">$error</span>.maxlength) &amp;&amp; loginForm.username.<span class="variable">$touched</span>"</span>&gt;用户名必须在4和10之间</span><br><span class="line">		&lt;/p&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span> ng-disabled=<span class="string">"loginForm.<span class="variable">$invalid</span>"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="三、自定义指令（验证两次输入的密码是否一致）"><a href="#三、自定义指令（验证两次输入的密码是否一致）" class="headerlink" title="三、自定义指令（验证两次输入的密码是否一致）"></a>三、自定义指令（验证两次输入的密码是否一致）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 在确认密码的input内应用这条指令，具体应用看最后完整版代码</span><br><span class="line">.directive(<span class="string">'compare'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> &#123;</span><br><span class="line">		strict: <span class="string">'AE'</span>,</span><br><span class="line">		scope: &#123;</span><br><span class="line">			orgText: <span class="string">'=compare'</span></span><br><span class="line">		&#125;,</span><br><span class="line">		require: <span class="string">'ngModel'</span>,</span><br><span class="line">		link: <span class="keyword">function</span>(scope, element, attr, con) &#123;</span><br><span class="line"></span><br><span class="line">			con.<span class="variable">$validators</span>.compare = <span class="keyword">function</span>(v) &#123;</span><br><span class="line">				<span class="built_in">return</span> v == scope.orgText;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			scope.<span class="variable">$watch</span>(<span class="string">'orgText'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">				con.<span class="variable">$validate</span>();</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="四、完整的表单验证代码如下"><a href="#四、完整的表单验证代码如下" class="headerlink" title="四、完整的表单验证代码如下"></a>四、完整的表单验证代码如下</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span> ng-app=<span class="string">"homeApp"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">	&lt;title&gt;表单验证&lt;/title&gt;</span><br><span class="line">	&lt;script src=<span class="string">"angular.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body ng-controller=<span class="string">"formController"</span>&gt;</span><br><span class="line">&lt;form name=<span class="string">"loginForm"</span> ng-submit=<span class="string">"submitLoginForm(loginForm.<span class="variable">$valid</span>)"</span>&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">		&lt;input ng-model=<span class="string">"userdata.username"</span> <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> class=<span class="string">"form-control"</span> ng-minlength=<span class="string">"4"</span> ng-maxlength=<span class="string">"10"</span> required/&gt;</span><br><span class="line">		&lt;p class=<span class="string">"error-red"</span> ng-if=<span class="string">"(loginForm.username.<span class="variable">$error</span>.minlength || loginForm.username.<span class="variable">$error</span>.maxlength) &amp;&amp; loginForm.username.<span class="variable">$touched</span>"</span>&gt;用户名必须在4和10之间</span><br><span class="line">		&lt;/p&gt;</span><br><span class="line">		&lt;p class=<span class="string">"error-red"</span> ng-if=<span class="string">"loginForm.username.<span class="variable">$error</span>.required &amp;&amp; loginForm.username.<span class="variable">$touched</span>"</span>&gt;用户名不能为空&lt;/p&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;密码&lt;/label&gt;</span><br><span class="line">		&lt;input ng-model=<span class="string">"userdata.pwd"</span> <span class="built_in">type</span>=<span class="string">"password"</span> name=<span class="string">"pwd"</span> required&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div class=<span class="string">"form-group"</span>&gt;</span><br><span class="line">		&lt;label&gt;密码&lt;/label&gt;</span><br><span class="line">		&lt;input ng-model=<span class="string">"userdata.repwd"</span> <span class="built_in">type</span>=<span class="string">"password"</span> name=<span class="string">"repwd"</span> compare=<span class="string">"userdata.pwd"</span>&gt;</span><br><span class="line">		&lt;p ng-if=<span class="string">"loginForm.repwd.<span class="variable">$error</span>.compare &amp;&amp; loginForm.repwd.<span class="variable">$touched</span>"</span>&gt;两次密码输入不一致&lt;/p&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span> ng-disabled=<span class="string">"loginForm.<span class="variable">$invalid</span>"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">angular.module(<span class="string">'homeApp'</span>, [])</span><br><span class="line"></span><br><span class="line">.controller(<span class="string">'formController'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>) &#123;</span><br><span class="line">	<span class="variable">$scope</span>.userdata = &#123;&#125;</span><br><span class="line">	<span class="variable">$scope</span>.submitLoginForm = <span class="keyword">function</span>(status) &#123;</span><br><span class="line">		<span class="keyword">if</span>(status == 1) &#123;</span><br><span class="line">			//提交数据到服务器</span><br><span class="line">			console.log(<span class="variable">$scope</span>.userdata);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;)</span><br><span class="line">.directive(<span class="string">'compare'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> &#123;</span><br><span class="line">		strict: <span class="string">'AE'</span>,</span><br><span class="line">		scope: &#123;</span><br><span class="line">			orgText: <span class="string">'=compare'</span></span><br><span class="line">		&#125;,</span><br><span class="line">		require: <span class="string">'ngModel'</span>,</span><br><span class="line">		link: <span class="keyword">function</span>(scope, element, attr, con) &#123;</span><br><span class="line"></span><br><span class="line">			con.<span class="variable">$validators</span>.compare = <span class="keyword">function</span>(v) &#123;</span><br><span class="line">				<span class="built_in">return</span> v == scope.orgText;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			scope.<span class="variable">$watch</span>(<span class="string">'orgText'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">				con.<span class="variable">$validate</span>();</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="五、自己尝试再试王道"><a href="#五、自己尝试再试王道" class="headerlink" title="五、自己尝试再试王道"></a>五、自己尝试再试王道</h2>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/07/11/angular表单验证/" data-id="cireqlzrc000cpwcjobnrcazt" class="article-share-link" data-share="baidu" data-title="angular表单验证">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular/">angular</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sublime-连接ftp服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/05/sublime-连接ftp服务器/" class="article-date">
  <time datetime="2016-07-05T03:12:39.000Z" itemprop="datePublished">2016-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/05/sublime-连接ftp服务器/">sublime 连接ftp服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、打开sublime，用Ctrl-Shift-P打开控制面板，输入install命令，下载名为SFTP的插件"><a href="#一、打开sublime，用Ctrl-Shift-P打开控制面板，输入install命令，下载名为SFTP的插件" class="headerlink" title="一、打开sublime，用Ctrl+Shift+P打开控制面板，输入install命令，下载名为SFTP的插件"></a>一、打开sublime，用<strong><em>Ctrl+Shift+P</em></strong>打开控制面板，输入install命令，下载名为SFTP的插件</h2><h2 id="二、下载完之后，可新建一个可存放远程代码的文件夹，拖入sublime的project中，右键找到SFTP-FTP—-gt-Map-to-remote-次数会弹出一个json文件，这个文件需要配置一些信息-其中需要配置的项如下："><a href="#二、下载完之后，可新建一个可存放远程代码的文件夹，拖入sublime的project中，右键找到SFTP-FTP—-gt-Map-to-remote-次数会弹出一个json文件，这个文件需要配置一些信息-其中需要配置的项如下：" class="headerlink" title="二、下载完之后，可新建一个可存放远程代码的文件夹，拖入sublime的project中，右键找到SFTP/FTP—&gt; Map to remote, 次数会弹出一个json文件，这个文件需要配置一些信息,其中需要配置的项如下："></a>二、下载完之后，可新建一个可存放远程代码的文件夹，拖入sublime的project中，右键找到SFTP/FTP—&gt; Map to remote, 次数会弹出一个json文件，这个文件需要配置一些信息,其中需要配置的项如下：</h2><ul>
<li>host</li>
<li>user</li>
<li>password</li>
<li>port</li>
<li>remote_path: 需要在远程ftp新建一个属于你自己的文件夹,这里填的就是该文件夹的路径</li>
</ul>
<h2 id="三、保存刚刚的json配置文件之后，右键project中的文件夹，找到SFTP-FTP—-gt-download-folder，即可下载ftp服务器的代码"><a href="#三、保存刚刚的json配置文件之后，右键project中的文件夹，找到SFTP-FTP—-gt-download-folder，即可下载ftp服务器的代码" class="headerlink" title="三、保存刚刚的json配置文件之后，右键project中的文件夹，找到SFTP/FTP—&gt;download folder，即可下载ftp服务器的代码"></a>三、保存刚刚的json配置文件之后，右键project中的文件夹，找到SFTP/FTP—&gt;download folder，即可下载ftp服务器的代码</h2><h2 id="四、修改代码然后保存，代码会自动更新到ftp中属于你的那个模块"><a href="#四、修改代码然后保存，代码会自动更新到ftp中属于你的那个模块" class="headerlink" title="四、修改代码然后保存，代码会自动更新到ftp中属于你的那个模块"></a>四、修改代码然后保存，代码会自动更新到ftp中属于你的那个模块</h2>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/07/05/sublime-连接ftp服务器/" data-id="cireqlzqc0007pwcjuzgykncr" class="article-share-link" data-share="baidu" data-title="sublime 连接ftp服务器">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-动态加载脚本" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/28/动态加载脚本/" class="article-date">
  <time datetime="2016-05-28T02:00:05.000Z" itemprop="datePublished">2016-05-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/28/动态加载脚本/">动态加载脚本</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、异步加载脚本-不推荐"><a href="#一、异步加载脚本-不推荐" class="headerlink" title="一、异步加载脚本(不推荐)"></a>一、异步加载脚本(不推荐)</h2><ul>
<li>之所以叫异步加载，是因为，在加载这些脚本的同时，主页面的脚本将会继续运行</li>
<li><p>document.write 和 动态添加script标签都属于异步加载</p>
</li>
<li><p>index.html</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">	&lt;title&gt;动态加载脚本&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	/*</span><br><span class="line">		异步执行脚本 ------ 下面的程序会报错的</span><br><span class="line">		原因：在运行“动态加载js的脚本loadScript()”的同时，主页面的脚本(<span class="built_in">test</span>())将会继续运行</span><br><span class="line">	*/</span><br><span class="line"></span><br><span class="line">	//使用document.write</span><br><span class="line"></span><br><span class="line">	<span class="keyword">function</span> loadScript(url, callBack) &#123;</span><br><span class="line">		document.write(<span class="string">'&lt;script src="'</span> + url + <span class="string">'"&gt;&lt;\/script&gt;'</span>);</span><br><span class="line">		callBack();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	loadScript(<span class="string">'test.js'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">		<span class="built_in">test</span>1(<span class="string">'welcome'</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">	document.write(<span class="string">'&lt;script src="test.js"&gt;&lt;\/script&gt;'</span>);</span><br><span class="line">	<span class="built_in">test</span>(<span class="string">'welcome'</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>test.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="built_in">test</span>(str) &#123;</span><br><span class="line">	alert(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>上面的程序会报错，因为loadScript执行的同时，test(‘welcome’)也在执行，因此loadScript还没执行完的时候，已经执行到test了，此时test是undefined的</p>
<hr>
<ul>
<li>同样的情况还在于：动态添加script标签</li>
<li>将上面index.html里面的js替换成下面的js<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> loadScript(url) &#123;</span><br><span class="line">	var oHead = document.getElementsByTagName(<span class="string">'HEAD'</span>).item(0),</span><br><span class="line">	oScript = document.createElement(<span class="string">'script'</span>);</span><br><span class="line">	oScript.src = url;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">loadScript(<span class="string">'./test.js'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>(<span class="string">'welcome'</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>也是同样的情况，test为undefined</p>
<hr>
<h1 id="二、同步加载脚本"><a href="#二、同步加载脚本" class="headerlink" title="二、同步加载脚本"></a>二、同步加载脚本</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">	大多数情况下，需要同步执行脚本</span><br><span class="line">	使用  XMLHttpRequest 对象</span><br><span class="line">*/</span><br><span class="line">var xmlhttp;</span><br><span class="line"><span class="keyword">function</span> loadXMLDoc(url) &#123;</span><br><span class="line">	xmlhttp = null;</span><br><span class="line">	<span class="keyword">if</span>(window.XMLHttpRequest) &#123;</span><br><span class="line">		//new browser</span><br><span class="line">		xmlhttp = new XMLHttpRequest();</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(window.ActiveXObject) &#123;</span><br><span class="line">		// IE5 and IE6</span><br><span class="line">		xmlhttp = new ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(xmlhttp != null) &#123;</span><br><span class="line">		xmlhttp.onreadystatechange = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">			<span class="keyword">if</span>(xmlhttp.readyState == 4) &#123; // 4 == loaded</span><br><span class="line">				<span class="keyword">if</span>(xmlhttp.status == 200) &#123;</span><br><span class="line">					// 200 == OK</span><br><span class="line">					addScriptToPage(xmlhttp.responseText);</span><br><span class="line"></span><br><span class="line">					//上面执行成功完之后才会执行下一步，因此属于同步执行，不会出现错误</span><br><span class="line">					<span class="built_in">test</span>(<span class="string">'welcome'</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		xmlhttp.open(<span class="string">"GET"</span>, url, <span class="literal">true</span>);</span><br><span class="line">		xmlhttp.send(null);</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		alert(<span class="string">"Your browser does not support XMLHTTP."</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//将获取到的脚本文档加载到html页面中</span><br><span class="line"><span class="keyword">function</span> addScriptToPage(txt) &#123;</span><br><span class="line">	<span class="keyword">if</span> ( txt != null )&#123; </span><br><span class="line">        var oHead = document.getElementsByTagName(<span class="string">'HEAD'</span>).item(0); </span><br><span class="line">        var oScript = document.createElement( <span class="string">"script"</span> ); </span><br><span class="line">        oScript.text = txt;</span><br><span class="line"></span><br><span class="line">        oHead.appendChild(oScript);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">loadXMLDoc(<span class="string">'test.js'</span>);</span><br></pre></td></tr></table></figure>
<p><strong>上面使用XMLHttpRequest对象，便可以保证在js加载到页面之后再执行下一步操作。</strong><br><strong>缺点：将所有的js全部嵌入html页面中，不利于维护，也不利于SEO优化。脚本庞大的时候更是一个大麻烦</strong></p>
<hr>
<h1 id="三、使用jquery的getScript方法"><a href="#三、使用jquery的getScript方法" class="headerlink" title="三、使用jquery的getScript方法"></a>三、使用jquery的getScript方法</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.getScript(<span class="string">'test-xmlhttp.js'</span>, <span class="keyword">function</span>(data) &#123;</span><br><span class="line">	<span class="built_in">test</span>(<span class="string">'welcome'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>使用jquery封装的getScript方法十分简单就实现了动态加载js，也解决了一，二存在的问题</li>
<li>使用getScript方法时，在加载的js地址后面会一个时间戳字符串，以防止改js文件被缓存。所以当你再次使用getScript方法加载同一个js时，会再一次请求服务器，请求成功返回状态码依然为200，服务器仍然返回改js文件所有的内容给你。</li>
<li>有时候，我们再次加载同一个js的时候，并不希望服务器返回一模一样的内容，这时候可以使用ajax的cache。设置了cache之后，可以将第二次请求的http状态码变成304(自从上次请求后，请求的网页未修改过。服务器返回此响应时，不会返回网页内容,可以节省宽带课开销)</li>
<li>设置ajax缓存的方法如下：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//使用ajax全局设置</span><br><span class="line">$.ajaxSetup(&#123;</span><br><span class="line">  cache: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//放弃使用getScript，直接使用比较底层的ajax方法获取脚本</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">      url: <span class="string">"test.js"</span>,</span><br><span class="line">      dataType: <span class="string">"script"</span>,</span><br><span class="line">      cache: <span class="literal">true</span>    //在这里设置缓存</span><br><span class="line">&#125;).done(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>就算设置了缓存，在再次加载相同的js的时候还是会出发http请求，只是请求没有返回js文件的内容</strong><br><strong>可以自己封装个函数，避免发出同样的http请求</strong></p>
<hr>
<h1 id="四、使用sea-js模块化加载脚本"><a href="#四、使用sea-js模块化加载脚本" class="headerlink" title="四、使用sea.js模块化加载脚本"></a>四、使用sea.js模块化加载脚本</h1><p><strong>使用原生js暂时不知道怎么解决二中的问题，但是突然发现了sea.js框架可以对js时兴模块化管理</strong><br>这里主要是先解决一下动态加载脚本的问题，sea.js的模块化管理是个大话题，以后再深入讨论</p>
<ul>
<li><p>index.html</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">	&lt;title&gt;动态加载脚本&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=<span class="string">"http://apps.bdimg.com/libs/seajs/2.3.0/sea.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// seajs 的简单配置</span><br><span class="line">	seajs.config(&#123;</span><br><span class="line">	  base: <span class="string">"/load-script/"</span>,  //配置加载脚本的路径</span><br><span class="line">	  <span class="built_in">alias</span>: &#123;&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	var num = 0;</span><br><span class="line">	<span class="built_in">set</span>Interval(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">		num ++;</span><br><span class="line">		console.log(num)</span><br><span class="line">		<span class="keyword">if</span>(num &gt; 5) &#123;</span><br><span class="line">			seajs.use(<span class="string">'./test1'</span>, <span class="keyword">function</span>(<span class="built_in">test</span>1) &#123;</span><br><span class="line">				<span class="built_in">test</span>1(<span class="string">'welcome'</span>);</span><br><span class="line">			&#125;)</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, 1000);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>test1.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="keyword">function</span>(require, exports, module) &#123;</span><br><span class="line">	<span class="keyword">function</span> <span class="built_in">test</span>1(str) &#123;</span><br><span class="line">		alert(str);</span><br><span class="line">	&#125;</span><br><span class="line">	module.exports = <span class="built_in">test</span>1;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/05/28/动态加载脚本/" data-id="cireqlzs7000hpwcjofzvmxxn" class="article-share-link" data-share="baidu" data-title="动态加载脚本">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/性能/">性能</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Angular-与外界通讯" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/22/Angular-与外界通讯/" class="article-date">
  <time datetime="2016-04-22T11:52:08.000Z" itemprop="datePublished">2016-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/AngularJS/">AngularJS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/22/Angular-与外界通讯/">Angular与外界通讯,$http服务</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$http</span>(&#123;</span><br><span class="line">	method: <span class="string">'GET'</span>,</span><br><span class="line">	url: <span class="string">'api-url'</span></span><br><span class="line">&#125;).success(funciton(data, status, headers, config) &#123;</span><br><span class="line">	//callback</span><br><span class="line">&#125;).error(<span class="keyword">function</span>(data, status, headers, config) &#123;</span><br><span class="line">	//<span class="keyword">if</span> error occurs, <span class="keyword">do</span> something</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="基本了解"><a href="#基本了解" class="headerlink" title="基本了解"></a>基本了解</h2><ul>
<li>$http服务简单的封装了浏览器原生的XMLHttpRequest对象</li>
<li>$http接收一个对象参数，这里面包含了HTTP请求的配置内容</li>
<li>返回状态码</li>
<li>返回的promise对象上有三个常用方法，then(), success(), error();then()会接收到完整的相应对象，而success和error则已经对返回的对象进行解析分离</li>
<li>then()方法接收了四个相应对象<br>data     返回的json数据<br>status   相应的http状态码,在200和299之间认为响应成功，success函数会被调用，否则error会被调用<br>headers  请求发送的HTTP头信息<br>config   原始请求的完整设置对象</li>
</ul>
<h2 id="快捷方法"><a href="#快捷方法" class="headerlink" title="快捷方法"></a>快捷方法</h2><p><strong>$http服务提供了一些方法可以简化复杂设置。这些快捷方法包括：</strong></p>
<ul>
<li><p>$http.get   两个参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$http</span>.get(<span class="string">'api-url'</span>, &#123;</span><br><span class="line">	params: &#123;</span><br><span class="line">	   <span class="string">"id"</span>: <span class="string">'2'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;).success(<span class="keyword">function</span>(data, status) &#123;</span><br><span class="line">	//<span class="keyword">if</span> success, <span class="keyword">do</span> something</span><br><span class="line">&#125;).error(<span class="keyword">function</span>(data, status) &#123;</span><br><span class="line">	//<span class="keyword">if</span> error, <span class="keyword">do</span> something</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>$http.post  三个参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var postData = &#123;</span><br><span class="line">	<span class="string">"username"</span>: <span class="string">'Mary'</span>,</span><br><span class="line">	<span class="string">"email"</span>: <span class="string">'mary@163.com'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable">$http</span>.post(<span class="string">'api-url'</span>, postData, &#123;</span><br><span class="line">	//其他配置项</span><br><span class="line">&#125;).success(<span class="keyword">function</span>(data, status, headers, config) &#123;</span><br><span class="line">	//<span class="keyword">if</span> success, <span class="keyword">do</span> something</span><br><span class="line">&#125;).error(<span class="keyword">function</span>(data, status, headers, config) &#123;</span><br><span class="line">	//<span class="keyword">if</span> error, <span class="keyword">do</span> something</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>还有其他常用的请求类型包括<br><strong>DELETE, PUT, JSONP</strong></p>
</li>
</ul>
<h2 id="http-的详细配置项"><a href="#http-的详细配置项" class="headerlink" title="$http 的详细配置项"></a>$http 的详细配置项</h2><ul>
<li>method 包括 <strong>GET</strong>,<strong>DELETE</strong>, <strong>POST</strong>, <strong>PUT</strong>, <strong>JSONP</strong>,等等</li>
<li>url  请求地址</li>
<li>params  可以是字符串或对象，会被转换成查询字符串追加在URL后面</li>
<li>data  通常在发送POST请求时使用</li>
<li>cache 布尔型，如果设置为true，那么angularJS会用默认的$http缓存来对GET请求进行缓存</li>
</ul>
<h2 id="缓存http请求"><a href="#缓存http请求" class="headerlink" title="缓存http请求"></a>缓存http请求</h2><ul>
<li>默认情况下，$http服务不会对请求进行本地缓存，但如果将$http的配置项cache设置为true的话，可以启动缓存机制。在第一次发送请求时，$http服务会向指定url发送请求，第二次发送同一个请求时，$http会从缓存中取回请求结果。</li>
<li><strong>cache不一定要设置为true，根据自己项目的逻辑需求而定</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$http</span>.get(<span class="string">'api-url'</span>, &#123;</span><br><span class="line">	cache: <span class="literal">true</span></span><br><span class="line">&#125;).success(<span class="keyword">function</span>(data) &#123;&#125;)</span><br><span class="line">.error(<span class="keyword">function</span>(data) &#123;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/04/22/Angular-与外界通讯/" data-id="cireqlzsq000npwcj5fw38klo" class="article-share-link" data-share="baidu" data-title="Angular与外界通讯,$http服务">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ajax/">ajax</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular/">angular</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-grunt对less进行实时监听和编译" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/grunt对less进行实时监听和编译/" class="article-date">
  <time datetime="2016-04-16T23:54:44.000Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/node/">node</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/grunt对less进行实时监听和编译/">grunt对less进行实时监听和编译,刷新页面</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>如果不需要启动本地服务器直接打开文件测试的话，其实很简单，只需要两个grunt的插件就可以解决</li>
<li>如果使用web开发的脚手架工具yeoman，grunt的一整套功能都已经集成好了，不需要自己编写Gruntfile.js，文件的目录结构也都已经有yeoman制定好了</li>
</ul>
<hr>
<h2 id="所需环境"><a href="#所需环境" class="headerlink" title="所需环境"></a>所需环境</h2><ul>
<li>node</li>
<li>chrome浏览器 及 chrome的livereload插件(可以去chrome网上应用店安装)</li>
<li>grunt</li>
<li>grunt 插件: grunt-contrib-less, grunt-contrib-watch</li>
</ul>
<hr>
<h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><ol>
<li><p><strong>package init</strong>(其实就是创建package.json)</p>
<ul>
<li>打开gitbash，执行以下命令,根据个人要求完成package.json的创建<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>安装grunt及所需插件</strong></p>
<ul>
<li>安装grunt</li>
<li>安装grunt-contrib-less和grunt-contrib-less<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install grunt --save-dev</span><br><span class="line"></span><br><span class="line">$ npm install grunt-contrib-watch grunt-contrib-less --save-dev</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>在根目录下创建 Gruntfile.js</strong></p>
<ul>
<li>文件的路径匹配到自己创建的文件夹:</li>
<li>livereload: true 的设置：浏览器实时刷新<br>Gruntfile.js 的内容大致如下<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">module.exports = <span class="keyword">function</span>(grunt) &#123;</span><br><span class="line">    grunt.initConfig(&#123;</span><br><span class="line">        pkg: grunt.file.readJSON(<span class="string">'package.json'</span>),</span><br><span class="line">        less: &#123;</span><br><span class="line">            development: &#123;</span><br><span class="line">                files: [&#123;</span><br><span class="line">                    expand: <span class="literal">true</span>,</span><br><span class="line">                    cwd: <span class="string">'./app/css/less'</span>, //less文件的位置</span><br><span class="line">                    src: [<span class="string">'**/*.less'</span>],  //目标文件</span><br><span class="line">                    dest: <span class="string">'./app/css/dist'</span>, //编译完成的css的位置</span><br><span class="line">                    ext: <span class="string">'.css'</span>   //编译完成的文件后缀名</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        watch: &#123;</span><br><span class="line">            options: &#123;</span><br><span class="line">                livereload: <span class="literal">true</span>   //浏览器实时刷新</span><br><span class="line">            &#125;,</span><br><span class="line">            scripts: &#123;</span><br><span class="line">                files: [<span class="string">'./app/css/less/**/*.less'</span>, <span class="string">'./app/html/**/*.html'</span>],  //实时刷新的监听文件</span><br><span class="line">                tasks: [<span class="string">'less'</span>], //监听到以上文件发生变化就执行less任务</span><br><span class="line">                options: &#123;</span><br><span class="line">                    spawn: <span class="literal">false</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    grunt.loadNpmTasks(<span class="string">'grunt-contrib-less'</span>);</span><br><span class="line">    grunt.loadNpmTasks(<span class="string">'grunt-contrib-watch'</span>);</span><br><span class="line"></span><br><span class="line">    grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'watch'</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>测试</strong></p>
<ul>
<li>在根目录下创建所需文件夹，然后新建html和less文件做测试</li>
<li>html中引用css的路径是编译后的css的路径</li>
<li>执行grunt (或者是grunt watch)</li>
<li>在浏览器中打开html文件，然后点击右上角的空心小圈圈，待其变成实心之后就可以实时刷新了</li>
<li>改变less文件，html的样式跟着改变</li>
</ul>
</li>
</ol>
<hr>
<h2 id="创建一个本地服务器然后在服务器上实时编译刷新"><a href="#创建一个本地服务器然后在服务器上实时编译刷新" class="headerlink" title="创建一个本地服务器然后在服务器上实时编译刷新"></a>创建一个本地服务器然后在服务器上实时编译刷新</h2><p>上一篇文章已经介绍了如何用grunt启动一个本地服务器，这里需要做一点修改，就是讲<strong>connect</strong>任务中的<strong>keepalive</strong>属性设置为<strong>false</strong>，或者直接注释掉，因为keepalive默认就是false<br>原因：如果keepalive为true，启动服务器之后就一直保持alive的状态，该任务会阻塞后面的任务，导致less无法完成编译<br><strong>需注意，watch和connect在同一个组合任务里面运行时，connect的keepalive要设置成false，因为watch任务本身就有keepalive的功能</strong></p>
<p>需修改和添加的代码如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">connect: &#123;</span><br><span class="line">    server: &#123;</span><br><span class="line">        options: &#123;</span><br><span class="line">            protocol: <span class="string">'http'</span>,</span><br><span class="line">            port: 8000,</span><br><span class="line">            // keepalive: <span class="literal">true</span>,</span><br><span class="line">            base: [<span class="string">'./app'</span>]  //注意根目录的配置</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">grunt.loadNpmTasks(<span class="string">'grunt-contrib-connect'</span>);</span><br><span class="line">grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'connect'</span>,<span class="string">'watch'</span>]);</span><br></pre></td></tr></table></figure></p>
<p><strong>此时执行grunt任务进行测试，然后在浏览器打开<a href="http://localhost:8000/html/test.html(根据目录结构做修改" target="_blank" rel="external">http://localhost:8000/html/test.html(根据目录结构做修改</a>)</strong></p>
<hr>
<h2 id="潜在问题"><a href="#潜在问题" class="headerlink" title="潜在问题"></a>潜在问题</h2><p>当less出现语法错误的时候，命令行出现提醒之后，不论再怎么改变less文件，都不能达到实时编译和更新的效果。这时候需要退出grunt任务，然后再重新执行grunt，才能达到预期的效果。不知道这么解决~~~~</p>
<p><a href="https://github.com/shinyshine/grunt-Gruntfile.js" target="_blank" rel="external">点击查看完整代码</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/04/17/grunt对less进行实时监听和编译/" data-id="cireqlzou0001pwcjaibpbvrg" class="article-share-link" data-share="baidu" data-title="grunt对less进行实时监听和编译,刷新页面">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grunt/">grunt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-用grunt创建一个开发用的本地测试服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/16/用grunt创建一个开发用的本地测试服务器/" class="article-date">
  <time datetime="2016-04-16T02:21:00.000Z" itemprop="datePublished">2016-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/node/">node</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/16/用grunt创建一个开发用的本地测试服务器/">用grunt创建一个开发用的本地测试服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下面用grunt及其插件grunt-contrib-connect启动一个本地的测试服务器</p>
<h2 id="保证有node-js的环境"><a href="#保证有node-js的环境" class="headerlink" title="保证有node.js的环境"></a>保证有node.js的环境</h2><h2 id="创建pakeage-json文件"><a href="#创建pakeage-json文件" class="headerlink" title="创建pakeage.json文件"></a>创建pakeage.json文件</h2><p>打开git bash执行以下命令，然后根据需求完善package.json文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="安装grunt及其相关插件"><a href="#安装grunt及其相关插件" class="headerlink" title="安装grunt及其相关插件"></a>安装grunt及其相关插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install grunt --save-dev</span><br><span class="line"><span class="variable">$npm</span> install grunt-contrib-connect --save-dev</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="创建Gruntfile-js-这个文件是grunt的精华所在了"><a href="#创建Gruntfile-js-这个文件是grunt的精华所在了" class="headerlink" title="创建Gruntfile.js(这个文件是grunt的精华所在了)"></a>创建Gruntfile.js(这个文件是grunt的精华所在了)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">module.exports = <span class="keyword">function</span>(grunt) &#123;</span><br><span class="line">	grunt.initConfig(&#123;</span><br><span class="line">		pkg: grunt.file.readJSON(<span class="string">'package.json'</span>),</span><br><span class="line">		connect: &#123;</span><br><span class="line">            server: &#123;</span><br><span class="line">                options: &#123;</span><br><span class="line">                    protocol: <span class="string">'http'</span>,</span><br><span class="line">                    port: 8000,</span><br><span class="line">                    hostname: <span class="string">'*'</span>,</span><br><span class="line">                    keepalive: <span class="literal">true</span>,</span><br><span class="line">                    open: <span class="literal">true</span>,</span><br><span class="line">                    base: [<span class="string">'./app'</span>]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	grunt.loadNpmTasks(<span class="string">'grunt-contrib-connect'</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>keepalive: 默认值为false，如果是false的话，当grunt创建完一个服务器就会自动关闭，来不及代开浏览器，创建的服务器就已经没有了。如果设置为true，可以保持connect 这个任务持续执行，服务器不会退出，才可以访问到服务器</li>
<li>如果8000端口被占用的话，可以修改端口号，</li>
<li>base：可以是一个字符串，或者一个数组，或者一个对象，用来表示映射到网站虚拟根目录的目标。默认是Gruntfile.js所在的目录</li>
<li>将open设置为true，在启动服务之后，可以自动打开浏览器，此时在输入想要调试的页面地址即可；open值也可以直接是一个地址，自动打开浏览器就直接打开所填的地址。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/04/16/用grunt创建一个开发用的本地测试服务器/" data-id="cireqlzvi001gpwcj7sfgd2c8" class="article-share-link" data-share="baidu" data-title="用grunt创建一个开发用的本地测试服务器">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grunt/">grunt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务器/">服务器</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AngularJS/">AngularJS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/微信/">微信</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax/">ajax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安全/">安全</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信/">微信</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能/">性能</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/说说/">说说</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/angular/" style="font-size: 16.67px;">angular</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/grunt/" style="font-size: 13.33px;">grunt</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/node/" style="font-size: 13.33px;">node</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/微信/" style="font-size: 10px;">微信</a> <a href="/tags/性能/" style="font-size: 10px;">性能</a> <a href="/tags/服务器/" style="font-size: 10px;">服务器</a> <a href="/tags/说说/" style="font-size: 10px;">说说</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/07/22/基于iscroll模拟原生应用中的下拉刷新和下拉加载更多/">模拟原生应用中的下拉刷新和下拉加载更多</a>
          </li>
        
          <li>
            <a href="/2016/07/20/微信分享链接自定义标题，图标和摘要/">微信分享链接自定义标题，图标和摘要</a>
          </li>
        
          <li>
            <a href="/2016/07/19/html页面反运营商劫持/">html页面反运营商劫持</a>
          </li>
        
          <li>
            <a href="/2016/07/12/angular中控制器之间的通信/">angular中控制器之间的通信</a>
          </li>
        
          <li>
            <a href="/2016/07/11/angular表单验证/">angular表单验证</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://xiguabaobao.com" target="_blank">主题作者</a>
          </li>
        
          <li>
            <a href="http://reqianduan.com" target="_blank">热前端</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Luo Xiaotong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">about</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
